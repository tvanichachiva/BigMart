#Load Libraries 
library(dplyr)
library(readr)
library(tibble)
library(ggplot2)
library(rlang)
library(cowplot)

#Reading in data
test <- read_csv("Data/Test.csv")
train <- read_csv("Data/Train.csv")

#Understanding the structure of the datasets
str(test)
str(train) 

all_equal(test, train, ignore_col_order = F) #train has one additional column

names(test)
names(train) #Item_Outlet_Sales is the additional column, this is what we will be predicting later on

#Combining test and train together for complete EDA
test <- test %>% 
          add_column(Item_Outlet_Sales = NA)
cmb <- rbind(test,train)
str(cmb)

#EDA - Plotting target variable from the train dataset
train %>% 
  ggplot(aes(Item_Outlet_Sales)) + 
    geom_histogram(binwidth = 150, fill = "light green") +
    theme_minimal()

#EDA - Plotting numeric variables in the cmb dataset
hist_plot <- function(ds, col, bw) {
    ggplot(data = ds, aes(x = {{col}})) + 
      geom_histogram(binwidth = bw, fill = "light blue" ) +
      theme_minimal()
}

weight_plot <- hist_plot(cmb, Item_Weight, 0.5)
vis_plot <- hist_plot(cmb, Item_Visibility, 0.005)
item_mrp <- hist_plot(cmb, Item_MRP, 0.5)

plot_grid(weight_plot, vis_plot, item_mrp)
